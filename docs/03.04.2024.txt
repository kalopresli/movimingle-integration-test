fix communication
fix diagram
integration tests
work on pipeline next